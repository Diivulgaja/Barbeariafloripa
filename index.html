<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ilha Cuts | Barbearia Premium</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        amber: { 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 900: '#78350f' },
                        zinc: { 750: '#202023', 800: '#27272a', 900: '#18181b', 950: '#09090b' }
                    },
                    fontFamily: { 
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'] 
                    },
                    animation: { 
                        'spin-slow': 'spin 3s linear infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite'
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                    }
                }
            }
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,700;1,400&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #000; color: #e4e4e7; }
        
        /* Premium Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #09090b; }
        ::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #f59e0b; }
        
        /* Animations */
        @keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-10px) rotate(1deg); } }
        @keyframes slideUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 0px #f59e0b00; } 50% { box-shadow: 0 0 20px #f59e0b33; } }

        .animate-slide-up { animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        /* Glassmorphism Refinado */
        .glass { 
            background: rgba(24, 24, 27, 0.7); 
            backdrop-filter: blur(16px); 
            -webkit-backdrop-filter: blur(16px); 
            border: 1px solid rgba(255, 255, 255, 0.08); 
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .glass-hover:hover {
            background: rgba(39, 39, 42, 0.8);
            border-color: rgba(245, 158, 11, 0.3);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.1);
            transform: translateY(-2px);
        }

        /* Input Autofill Fix */
        input:-webkit-autofill,
        input:-webkit-autofill:hover, 
        input:-webkit-autofill:focus, 
        input:-webkit-autofill:active{
            -webkit-box-shadow: 0 0 0 30px #18181b inset !important;
            -webkit-text-fill-color: white !important;
            transition: background-color 5000s ease-in-out 0s;
        }
    </style>
</head>
<body class="bg-black text-zinc-200 antialiased selection:bg-amber-500 selection:text-black overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;
        
        // --- SUPABASE CONFIG ---
        const supabaseUrl = 'https://aqxwkrgmmomlhbvbolld.supabase.co'; 
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFxeHdrcmdtbW9tbGhidmJvbGxkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzOTI5MTYsImV4cCI6MjA4NDk2ODkxNn0.dx61Nka8dKdozydNAps6KKMzNr1qEBJWF19GENEkpTc';
        
        let sbClient = null;
        try { 
            if (window.supabase) sbClient = window.supabase.createClient(supabaseUrl, supabaseKey);
        } catch (e) { console.error("Supabase Init Error:", e); }

        // --- ICONS SYSTEM (SVG Inline) ---
        const Icon = ({ path, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} dangerouslySetInnerHTML={{ __html: path }} />
        );
        const icons = {
            scissors: '<circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" x2="8.12" y1="4" y2="15.88"/><line x1="14.47" x2="20" y1="14.48" y2="20"/><line x1="8.12" x2="12" y1="8.12" y2="12"/>',
            calendar: '<rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/>',
            clock: '<circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>',
            mapPin: '<path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/>',
            user: '<path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>',
            check: '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>',
            menu: '<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',
            x: '<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',
            star: '<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>',
            dollar: '<line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>',
            users: '<path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>',
            logOut: '<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/>',
            dashboard: '<rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/>',
            settings: '<path d="M12.22 2h-.44a2 2 0 0 1-2-1.08l-.58-1.28a2 2 0 0 0-3.18-.53l-1 .85a2 2 0 0 1-2.26.23l-1.3-.8a2 2 0 0 0-2.88 1.48l-.13 1.34a2 2 0 0 1-1.63 1.83l-1.35.25a2 2 0 0 0-1.4 2.8l.94 1a2 2 0 0 1 .46 2.22l-.78 1.15a2 2 0 0 0 1.25 3l1.32.17a2 2 0 0 1 1.85 1.41l.46 1.3a2 2 0 0 0 2.93 1l1.1-.73a2 2 0 0 1 2.22.13l1.23.83a2 2 0 0 0 3-.97l.34-1.29a2 2 0 0 1 2.07-1.46l1.33-.08a2 2 0 0 0 2.15-2.6l-.8-1.13a2 2 0 0 1-.28-2.3l1-1.05a2 2 0 0 0-.6-3l-1.32-.42a2 2 0 0 1-1.63-1.8l.12-1.37a2 2 0 0 0-1.87-2.67l-1.22.42a2 2 0 0 1-2.2-.67l-.23-1.36A2 2 0 0 0 12.22 2z"/><circle cx="12" cy="12" r="3"/>',
            phone: '<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>',
            instagram: '<rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/>',
            zap: '<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>',
            arrowRight: '<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',
            barChart: '<path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/>',
            bell: '<path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>',
            trash: '<polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/>',
            plus: '<line x1="12" x2="12" y1="5" y2="19"/><line x1="5" x2="19" y1="12" y2="12"/>',
            briefcase: '<rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>',
            filter: '<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>'
        };

        const BUSINESS = {
            name: "ILHA CUTS",
            address: "Rua Bocaiúva, 1234, Centro - Floripa",
            phone: "(48) 99999-9999",
            map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3536.275841643477!2d-48.54960302359744!3d-27.58503892804535!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9527382046429357%3A0x6e257211516f1c4e!2sBeiramar%20Shopping!5e0!3m2!1spt-BR!2sbr"
        };

        const SERVICES_DEFAULT = [
            { id: 1, name: "Corte Signature", price: 75, duration: 45, desc_text: "Consultoria visual completa e corte." },
            { id: 2, name: "Barba Real", price: 55, duration: 30, desc_text: "Toalha quente e óleos essenciais." },
            { id: 3, name: "Combo Ilha", price: 110, duration: 80, desc_text: "Experiência completa cabelo e barba." }
        ];

        const STAFF_DEFAULT = [
            { id: 1, name: "João 'Navalha'", role: "Master Barber", rating: 5.0, image: "JN", desc_text: "15 anos de tradição." },
            { id: 2, name: "Pedro 'Fade'", role: "Expert", rating: 4.9, image: "PF", desc_text: "Mestre em degradês modernos." }
        ];

        const GALLERY = [
            "https://images.unsplash.com/photo-1599351431202-1e0f0137899a?q=80&w=800&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1622286342621-4bd786c2447c?q=80&w=800&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1532710093739-9470acff878f?q=80&w=800&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1503951914875-452162b7f30a?q=80&w=800&auto=format&fit=crop"
        ];

        const fmtMoney = (v) => new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(v);

        // --- COMMON UI COMPONENTS ---
        const GlassCard = ({ children, className = '', hoverEffect = true }) => (
            <div className={`glass p-6 rounded-2xl transition-all duration-500 ${hoverEffect ? 'glass-hover' : ''} ${className}`}>
                {children}
            </div>
        );

        const SectionHeader = ({ title, subtitle, centered = true }) => (
            <div className={`mb-20 ${centered ? 'text-center' : ''} animate-slide-up`}>
                <h2 className="text-4xl md:text-5xl font-bold text-white mb-6 font-serif tracking-wide">
                    {title.split(' ').map((w, i) => <span key={i} className={i === 1 ? "text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-amber-600" : ""}>{w} </span>)}
                </h2>
                <div className={`h-1 w-20 bg-amber-500 rounded-full mb-6 ${centered ? 'mx-auto' : ''}`} />
                {subtitle && <p className="text-zinc-400 text-lg max-w-2xl mx-auto leading-relaxed font-light">{subtitle}</p>}
            </div>
        );

        const Button = ({ children, onClick, icon, disabled, className = '', variant = 'primary' }) => {
            const base = "relative overflow-hidden font-bold py-3.5 px-8 rounded-xl transition-all duration-300 active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 disabled:cursor-not-allowed tracking-wide text-sm";
            const style = variant === 'primary' 
                ? "bg-gradient-to-r from-amber-500 to-amber-600 text-black hover:shadow-[0_0_25px_rgba(245,158,11,0.5)] hover:to-amber-500" 
                : "border border-zinc-700 hover:bg-zinc-800 text-white hover:border-amber-500/50";
            return (
                <button onClick={onClick} disabled={disabled} className={`${base} ${style} ${className}`}>
                    {children} {icon && <Icon path={icons[icon]} size={18} />}
                </button>
            );
        };

        const Navbar = ({ onViewChange, currentView, scrolled, onOpenBooking }) => {
            const [mobileOpen, setMobileOpen] = useState(false);
            return (
                <nav className={`fixed top-0 inset-x-0 z-50 transition-all duration-500 border-b ${scrolled ? 'py-4 bg-black/80 backdrop-blur-xl border-zinc-800' : 'py-6 bg-transparent border-transparent'}`}>
                    <div className="container mx-auto px-6 flex justify-between items-center relative">
                        <div onClick={() => onViewChange('home')} className="flex items-center gap-3 cursor-pointer group z-50">
                            <div className="w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg flex items-center justify-center text-black shadow-lg shadow-amber-500/20 group-hover:rotate-12 transition-transform duration-500"><Icon path={icons.scissors} size={20}/></div>
                            <div><h1 className="text-xl font-bold text-white leading-none tracking-wider font-serif">ILHA<span className="text-amber-500">CUTS</span></h1><span className="text-[10px] text-zinc-400 uppercase tracking-[0.3em] font-semibold">Premium</span></div>
                        </div>
                        <div className="hidden md:flex items-center gap-8">
                            {['Serviços', 'Equipa', 'Galeria', 'Local'].map(i => (
                                <button key={i} onClick={() => document.getElementById(i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, ""))?.scrollIntoView({ behavior: 'smooth' })} className="text-xs font-bold text-zinc-400 hover:text-white uppercase tracking-widest transition-colors hover:text-amber-500">{i}</button>
                            ))}
                            {currentView === 'admin' ? 
                                <button onClick={() => onViewChange('home')} className="text-red-500 text-xs font-bold uppercase border border-red-900/50 px-4 py-2 rounded-lg hover:bg-red-900/20 transition-all">Sair Admin</button> :
                                <div className="flex items-center gap-6 pl-6 border-l border-zinc-800">
                                    <button onClick={() => onViewChange('admin')} className="text-zinc-600 hover:text-white transition-colors" title="Admin"><Icon path={icons.settings} size={20}/></button>
                                    <Button onClick={onOpenBooking} className="!py-2.5 !px-6 text-xs uppercase tracking-widest">Agendar</Button>
                                </div>
                            }
                        </div>
                        <button className="md:hidden text-white p-2 z-50" onClick={() => setMobileOpen(!mobileOpen)}><Icon path={mobileOpen ? icons.x : icons.menu} /></button>
                        {mobileOpen && (
                            <div className="absolute top-full left-0 w-full bg-zinc-950 border-b border-zinc-800 p-6 flex flex-col gap-4 animate-fade-in md:hidden shadow-2xl">
                                {['Serviços', 'Equipa', 'Galeria', 'Local'].map(i => (
                                    <button key={i} onClick={() => { document.getElementById(i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, ""))?.scrollIntoView({ behavior: 'smooth' }); setMobileOpen(false); }} className="text-left text-zinc-300 hover:text-white py-3 border-b border-zinc-900 font-bold uppercase tracking-wide">{i}</button>
                                ))}
                                <Button onClick={() => { onOpenBooking(); setMobileOpen(false); }} className="w-full mt-2">Agendar Agora</Button>
                                <button onClick={() => { onViewChange('admin'); setMobileOpen(false); }} className="text-xs text-zinc-600 text-center mt-4">Acesso Administrativo</button>
                            </div>
                        )}
                    </div>
                </nav>
            );
        };

        const Hero = ({ onCta }) => (
            <section className="relative min-h-screen flex items-center pt-20 overflow-hidden">
                <div className="absolute inset-0 z-0">
                    <img src="https://images.unsplash.com/photo-1503951914875-452162b7f30a?q=80&w=2070&auto=format&fit=crop" className="w-full h-full object-cover opacity-40 scale-105 animate-slow-zoom"/>
                    <div className="absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent" />
                    <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-black/40" />
                </div>
                <div className="container mx-auto px-6 relative z-10 grid lg:grid-cols-2 gap-16 items-center">
                    <div className="space-y-10 animate-slide-up max-w-2xl">
                        <div className="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-amber-500/30 bg-amber-500/10 text-amber-500 text-[10px] font-bold tracking-[0.2em] uppercase backdrop-blur-md"><Icon path={icons.star} size={10}/> A melhor da Ilha</div>
                        <h1 className="text-6xl md:text-8xl font-bold text-white leading-[1.1] tracking-tight font-serif">Sua Imagem, <br/><span className="text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-amber-700">Nosso Legado.</span></h1>
                        <p className="text-zinc-400 text-lg md:text-xl max-w-lg leading-relaxed border-l-4 border-amber-500 pl-6 font-light">Não é apenas um corte. É um ritual de cavalheiros. Experimente a barbearia que redefiniu o conceito de estilo em Florianópolis.</p>
                        <div className="flex flex-col sm:flex-row gap-5 pt-4">
                            <Button onClick={onCta} icon="calendar" className="text-base shadow-xl shadow-amber-900/20">Agendar Horário</Button>
                            <button onClick={() => document.getElementById('galeria')?.scrollIntoView({ behavior: 'smooth' })} className="px-8 py-4 rounded-xl border border-white/10 text-white font-bold hover:bg-white/5 transition-all flex items-center justify-center gap-3 group text-sm uppercase tracking-widest"><Icon path={icons.zap} size={18} className="text-amber-500 group-hover:scale-110 transition-transform"/> Ver Galeria</button>
                        </div>
                    </div>
                    <div className="hidden lg:block relative animate-float">
                        <GlassCard className="rotate-3 max-w-sm ml-auto border-amber-500/20 bg-black/40 backdrop-blur-3xl shadow-2xl">
                            <div className="flex justify-between items-start mb-8">
                                <div><p className="text-amber-500 text-[10px] font-bold uppercase tracking-[0.2em] mb-2">Próximo Horário</p><h3 className="text-4xl font-serif font-bold text-white">Hoje, 14:00</h3></div>
                                <div className="p-4 bg-gradient-to-br from-amber-400 to-amber-600 rounded-xl text-black shadow-lg shadow-amber-500/20"><Icon path={icons.scissors} size={28}/></div>
                            </div>
                            <div className="space-y-6">
                                <div><div className="flex justify-between text-xs text-zinc-400 mb-2 uppercase tracking-wide"><span>Disponibilidade</span><span>3 Barbeiros</span></div><div className="h-1.5 bg-zinc-800 rounded-full overflow-hidden"><div className="h-full w-3/4 bg-amber-500 animate-pulse-glow" /></div></div>
                                <button onClick={onCta} className="w-full py-4 rounded-xl bg-zinc-800 hover:bg-zinc-700 text-white text-xs uppercase tracking-widest font-bold transition-all border border-zinc-700 hover:border-amber-500/50 flex justify-center items-center gap-3 hover:shadow-lg">Reservar Agora <Icon path={icons.arrowRight} size={14}/></button>
                            </div>
                        </GlassCard>
                    </div>
                </div>
            </section>
        );

        const Features = ({ services }) => (
            <section id="servicos" className="py-32 bg-black relative">
                <div className="absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-zinc-800 to-transparent"></div>
                <div className="container mx-auto px-6">
                    <SectionHeader title="Experiência Premium" subtitle="Técnicas clássicas combinadas com produtos de alta performance para um resultado impecável." />
                    <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        {services.length > 0 ? services.map((s, i) => (
                            <GlassCard key={s.id} className="group flex flex-col justify-between h-full">
                                <div>
                                    <div className="flex justify-between items-start mb-8">
                                        <div className="w-14 h-14 rounded-2xl bg-zinc-800/50 flex items-center justify-center text-amber-500 group-hover:bg-amber-500 group-hover:text-black transition-all duration-500 group-hover:shadow-[0_0_20px_rgba(245,158,11,0.3)]"><Icon path={icons.scissors} size={24}/></div>
                                        {i === 0 && <span className="bg-amber-500/20 text-amber-500 text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wide">Popular</span>}
                                    </div>
                                    <h3 className="text-xl font-bold text-white mb-3 group-hover:text-amber-500 transition-colors font-serif">{s.name}</h3>
                                    <p className="text-zinc-400 text-sm leading-relaxed mb-6 font-light">{s.desc_text}</p>
                                </div>
                                <div className="flex items-center justify-between pt-6 border-t border-zinc-800 group-hover:border-zinc-700 transition-colors">
                                    <span className="text-2xl font-bold text-white font-serif">{fmtMoney(s.price)}</span>
                                    <div className="flex items-center gap-2 text-xs text-zinc-500 font-bold uppercase tracking-wider"><Icon path={icons.clock} size={14} className="text-amber-500"/> {s.duration} min</div>
                                </div>
                            </GlassCard>
                        )) : <div className="col-span-4 text-center text-zinc-500 animate-pulse">Carregando serviços...</div>}
                    </div>
                </div>
            </section>
        );

        const Team = ({ staff }) => (
            <section id="equipa" className="py-32 bg-zinc-950 relative border-y border-zinc-900/50">
                <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-[0.03]"></div>
                <div className="container mx-auto px-6 relative z-10">
                    <SectionHeader title="Mestres da Navalha" subtitle="Profissionais escolhidos a dedo para garantir a sua melhor versão." />
                    <div className="grid md:grid-cols-3 gap-8">
                        {staff.length > 0 ? staff.map((s, idx) => (
                            <div key={s.id} className="group relative h-[28rem] rounded-2xl overflow-hidden bg-zinc-900 border border-zinc-800 shadow-2xl">
                                <div className="absolute inset-0 flex items-center justify-center text-zinc-800 font-black text-9xl opacity-10 group-hover:scale-110 transition-transform duration-1000 select-none">{s.image}</div>
                                <div className="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent flex flex-col justify-end p-8 translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                                    <div className="flex justify-between items-end mb-2">
                                        <h3 className="text-2xl font-bold text-white font-serif">{s.name}</h3>
                                        <div className="flex items-center gap-1 text-amber-400 text-xs font-bold bg-black/50 px-2 py-1 rounded backdrop-blur-sm"><Icon path={icons.star} size={12}/> {s.rating}</div>
                                    </div>
                                    <p className="text-amber-500 text-xs font-bold uppercase tracking-widest mb-4">{s.role}</p>
                                    <div className="h-0 group-hover:h-auto overflow-hidden transition-all duration-500">
                                        <p className="text-zinc-300 text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-700 delay-100 leading-relaxed font-light">{s.desc_text}</p>
                                    </div>
                                </div>
                            </div>
                        )) : <div className="col-span-3 text-center text-zinc-500 animate-pulse">Carregando equipe...</div>}
                    </div>
                </div>
            </section>
        );

        const Gallery = () => (
            <section id="galeria" className="py-32 bg-black">
                <div className="container mx-auto px-6">
                    <SectionHeader title="Nossa Arte" subtitle="Confira alguns dos nossos trabalhos recentes e inspire-se." />
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 auto-rows-[200px]">
                        {GALLERY.map((src, i) => (
                            <div key={i} className={`rounded-2xl overflow-hidden relative group cursor-pointer border border-zinc-800 ${i === 0 ? 'md:col-span-2 md:row-span-2' : ''}`}>
                                <img src={src} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000 grayscale group-hover:grayscale-0" alt="Corte" loading="lazy"/>
                                <div className="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center">
                                    <div className="w-16 h-16 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center text-white border border-white/20 transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                                        <Icon path={icons.instagram} size={28} />
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </section>
        );

        const Footer = () => (
            <footer id="local" className="bg-zinc-950 pt-24 pb-12 border-t border-zinc-900 relative overflow-hidden">
                <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black p-4 rounded-full border border-zinc-900 z-10 text-amber-600"><Icon path={icons.scissors} size={32}/></div>
                <div className="container mx-auto px-6 grid md:grid-cols-4 gap-16 relative z-10">
                    <div className="col-span-2">
                        <h2 className="text-3xl font-bold text-white mb-6 font-serif">ILHA<span className="text-amber-500">CUTS</span></h2>
                        <p className="text-zinc-400 max-w-sm mb-8 leading-relaxed font-light">A tradição da barbearia clássica com a modernidade que você precisa. O melhor corte, a melhor cerveja, a melhor resenha.</p>
                        <div className="flex gap-4">
                            <button onClick={() => window.open('https://instagram.com', '_blank')} className="w-12 h-12 rounded-xl border border-zinc-800 bg-zinc-900 flex items-center justify-center text-zinc-400 hover:border-amber-500 hover:text-amber-500 hover:bg-amber-500/5 transition-all duration-300"><Icon path={icons.instagram} size={20}/></button>
                            <button onClick={() => window.location.href = `tel:${BUSINESS.phone}`} className="w-12 h-12 rounded-xl border border-zinc-800 bg-zinc-900 flex items-center justify-center text-zinc-400 hover:border-amber-500 hover:text-amber-500 hover:bg-amber-500/5 transition-all duration-300"><Icon path={icons.phone} size={20}/></button>
                        </div>
                    </div>
                    <div>
                        <h4 className="text-white font-bold mb-8 text-sm uppercase tracking-widest">Links Rápidos</h4>
                        <ul className="space-y-4 text-zinc-400 text-sm">
                            {['Serviços', 'Equipe', 'Galeria'].map(l => (
                                <li key={l} className="hover:text-amber-500 cursor-pointer transition-colors hover:translate-x-1 duration-300 inline-block" onClick={() => document.getElementById(l.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, ""))?.scrollIntoView({ behavior: 'smooth' })}>{l}</li>
                            ))}
                        </ul>
                    </div>
                    <div>
                        <h4 className="text-white font-bold mb-8 text-sm uppercase tracking-widest">Onde Estamos</h4>
                        <div className="w-full h-40 rounded-2xl overflow-hidden bg-zinc-900 border border-zinc-800 relative group cursor-pointer mb-6">
                            <iframe src={BUSINESS.map} className="w-full h-full opacity-50 group-hover:opacity-80 transition-opacity grayscale invert" style={{border:0}} loading="lazy" />
                        </div>
                        <p className="text-xs text-zinc-500 flex items-start gap-3 leading-relaxed"><Icon path={icons.mapPin} size={16} className="text-amber-500 shrink-0 mt-0.5"/> {BUSINESS.address}</p>
                    </div>
                </div>
                <div className="container mx-auto px-6 mt-20 pt-8 border-t border-zinc-900 text-center text-zinc-600 text-xs flex flex-col md:flex-row justify-between items-center gap-4">
                    <span>&copy; {new Date().getFullYear()} Ilha Cuts Barbearia. Todos os direitos reservados.</span>
                    <span className="flex items-center gap-2">Feito com precisão <Icon path={icons.scissors} size={12} /></span>
                </div>
            </footer>
        );

        // --- BOOKING LOGIC ---
        const BookingModal = ({ isOpen, onClose, onConfirm, isSaving, services, staff }) => {
            const [step, setStep] = useState(1);
            const [form, setForm] = useState({ service: null, barber: null, date: '', time: '', clientName: '', clientPhone: '' });
            
            const isStepValid = () => {
                if(step === 1) return !!form.service;
                if(step === 2) return !!form.barber;
                if(step === 3) return !!form.date && !!form.time;
                if(step === 4) return !!form.clientName && !!form.clientPhone;
                return false;
            };

            if (!isOpen) return null;
            const next = (k, v) => { if(k) setForm(p => ({...p, [k]: v})); setStep(s => s + 1); };

            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center bg-black/90 backdrop-blur-md animate-fade-in p-4">
                    <div className="w-full max-w-5xl h-[85vh] md:h-auto bg-zinc-950 border border-zinc-800 rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row relative animate-slide-up">
                        <button onClick={onClose} className="absolute top-6 right-6 text-zinc-500 hover:text-white z-50 transition-colors p-2"><Icon path={icons.x} size={24} /></button>
                        
                        {/* Sidebar */}
                        <div className="w-full md:w-1/3 bg-zinc-900/50 p-10 border-b md:border-b-0 md:border-r border-zinc-800 flex flex-col justify-between backdrop-blur-xl">
                            <div>
                                <h3 className="text-3xl font-bold text-white mb-2 font-serif">Agendamento</h3>
                                <p className="text-zinc-500 text-sm mb-10">Siga os passos para garantir seu horário.</p>
                                <div className="space-y-8 relative">
                                    <div className="absolute left-[22px] top-4 bottom-4 w-0.5 bg-zinc-800 -z-10" />
                                    {[{l:"Serviço", i:'scissors'}, {l:"Barbeiro", i:'user'}, {l:"Data", i:'calendar'}, {l:"Confirmar", i:'check'}].map((s, i) => (
                                        <div key={i} className={`flex items-center gap-6 transition-all duration-500 ${step === i + 1 ? 'opacity-100 translate-x-0' : 'opacity-40'}`}>
                                            <div className={`w-12 h-12 rounded-xl flex items-center justify-center border-2 transition-all duration-300 ${step > i + 1 ? 'bg-amber-500 border-amber-500 text-black scale-90' : step === i + 1 ? 'bg-zinc-900 border-amber-500 text-amber-500 shadow-[0_0_15px_rgba(245,158,11,0.3)]' : 'bg-zinc-950 border-zinc-800 text-zinc-600'}`}>
                                                {step > i + 1 ? <Icon path={icons.check} size={20}/> : <Icon path={icons[s.i]} size={20}/>}
                                            </div>
                                            <div>
                                                <p className={`text-[10px] font-bold uppercase tracking-widest mb-0.5 ${step === i + 1 ? 'text-amber-500' : 'text-zinc-600'}`}>Passo 0{i+1}</p>
                                                <p className="text-base font-bold text-white">{s.l}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="hidden md:block mt-8">
                                <div className="p-6 rounded-2xl bg-black border border-zinc-800/50">
                                    <p className="text-zinc-500 text-xs mb-2 uppercase tracking-widest font-bold">Total Estimado</p>
                                    <p className="text-3xl font-bold text-white font-serif tracking-tight">{form.service ? fmtMoney(form.service.price) : 'R$ 0,00'}</p>
                                </div>
                            </div>
                        </div>

                        {/* Content */}
                        <div className="flex-1 p-8 md:p-12 overflow-y-auto bg-zinc-950">
                            <div className="max-w-md mx-auto h-full flex flex-col">
                                {step === 1 && (
                                    <div className="animate-slide-up space-y-4">
                                        <h4 className="text-2xl font-bold text-white mb-8 font-serif">O que vamos fazer hoje?</h4>
                                        {services.map(s => (
                                            <button key={s.id} onClick={() => next('service', s)} className="w-full text-left p-6 rounded-2xl border border-zinc-800 bg-zinc-900/30 hover:border-amber-500 hover:bg-zinc-900 transition-all group flex justify-between items-center hover:shadow-lg hover:shadow-amber-900/10">
                                                <div><div className="font-bold text-lg text-white group-hover:text-amber-500 transition-colors mb-1">{s.name}</div><div className="text-xs text-zinc-500 font-medium">{s.duration} min • {s.desc_text}</div></div>
                                                <div className="text-amber-500 font-bold text-lg font-serif">{fmtMoney(s.price)}</div>
                                            </button>
                                        ))}
                                    </div>
                                )}
                                {step === 2 && (
                                    <div className="animate-slide-up">
                                        <h4 className="text-2xl font-bold text-white mb-8 font-serif">Quem vai te atender?</h4>
                                        <div className="grid grid-cols-2 gap-4">
                                            {staff.map(s => (
                                                <button key={s.id} onClick={() => next('barber', s)} className="p-6 rounded-2xl border border-zinc-800 bg-zinc-900/30 hover:border-amber-500 hover:bg-zinc-900 transition-all group flex flex-col items-center gap-4 text-center hover:shadow-lg hover:shadow-amber-900/10">
                                                    <div className="w-20 h-20 rounded-full bg-zinc-800 border-2 border-zinc-700 flex items-center justify-center text-2xl font-bold text-zinc-500 group-hover:border-amber-500 group-hover:text-white transition-all group-hover:scale-110">{s.image}</div>
                                                    <div><p className="font-bold text-white text-lg group-hover:text-amber-500 transition-colors">{s.name}</p><p className="text-xs text-zinc-500 mt-1 uppercase tracking-wide font-bold">{s.role}</p></div>
                                                </button>
                                            ))}
                                        </div>
                                        <button onClick={() => setStep(1)} className="mt-8 text-zinc-500 hover:text-white text-sm flex items-center gap-2 transition-colors"><Icon path={icons.arrowRight} size={16} className="rotate-180"/> Voltar</button>
                                    </div>
                                )}
                                {step === 3 && (
                                    <div className="animate-slide-up space-y-8">
                                        <h4 className="text-2xl font-bold text-white font-serif">Escolha o melhor horário</h4>
                                        <div>
                                            <label className="block text-zinc-400 text-xs font-bold uppercase tracking-widest mb-3">Data</label>
                                            <input type="date" className="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-4 text-white focus:border-amber-500 outline-none transition-colors" onChange={e => setForm(prev => ({...prev, date: e.target.value}))} />
                                        </div>
                                        <div>
                                            <label className="block text-zinc-400 text-xs font-bold uppercase tracking-widest mb-3">Horários Disponíveis</label>
                                            <div className="grid grid-cols-3 gap-3">
                                                {["09:00","10:00","11:00","14:00","15:00","16:00","17:00","18:00","19:00"].map(t => (
                                                    <button key={t} onClick={() => next('time', t)} disabled={!form.date} className="py-3 rounded-xl border border-zinc-800 bg-zinc-900/30 hover:bg-amber-500 hover:text-black text-white disabled:opacity-30 disabled:cursor-not-allowed font-bold transition-all hover:scale-105 active:scale-95">{t}</button>
                                                ))}
                                            </div>
                                        </div>
                                        <button onClick={() => setStep(2)} className="text-zinc-500 hover:text-white text-sm flex items-center gap-2 transition-colors"><Icon path={icons.arrowRight} size={16} className="rotate-180"/> Voltar</button>
                                    </div>
                                )}
                                {step === 4 && (
                                    <div className="animate-slide-up h-full flex flex-col">
                                        <h4 className="text-2xl font-bold text-white mb-8 font-serif">Confirmar Detalhes</h4>
                                        <div className="bg-zinc-900/50 p-6 rounded-2xl border border-zinc-800 mb-8 space-y-6">
                                            <div className="flex justify-between border-b border-zinc-800 pb-4">
                                                <div><p className="text-zinc-500 text-[10px] uppercase tracking-widest font-bold mb-1">Serviço</p><p className="text-white font-bold text-lg">{form.service?.name}</p></div>
                                                <div className="text-right"><p className="text-zinc-500 text-[10px] uppercase tracking-widest font-bold mb-1">Valor</p><p className="text-amber-500 font-bold text-lg font-serif">{fmtMoney(form.service?.price)}</p></div>
                                            </div>
                                            <div className="flex items-center gap-4">
                                                <div className="w-12 h-12 rounded-full bg-zinc-800 flex items-center justify-center text-sm font-bold text-zinc-400 border border-zinc-700">{form.barber?.image}</div>
                                                <div><p className="text-white font-bold">{form.barber?.name}</p><p className="text-zinc-500 text-sm flex items-center gap-2"><Icon path={icons.calendar} size={12}/> {form.date} às {form.time}</p></div>
                                            </div>
                                        </div>
                                        <div className="space-y-5 mb-8">
                                            <div className="space-y-2">
                                                <label className="text-xs font-bold text-zinc-500 uppercase tracking-widest ml-1">Seu Nome</label>
                                                <input type="text" className="w-full bg-transparent border-b border-zinc-700 py-3 px-1 text-white outline-none focus:border-amber-500 transition-colors placeholder:text-zinc-700 font-medium" placeholder="Ex: Carlos Silva" value={form.clientName} onChange={e => setForm(prev => ({...prev, clientName: e.target.value}))} />
                                            </div>
                                            <div className="space-y-2">
                                                <label className="text-xs font-bold text-zinc-500 uppercase tracking-widest ml-1">WhatsApp</label>
                                                <input type="tel" className="w-full bg-transparent border-b border-zinc-700 py-3 px-1 text-white outline-none focus:border-amber-500 transition-colors placeholder:text-zinc-700 font-medium" placeholder="(00) 90000-0000" value={form.clientPhone} onChange={e => setForm(prev => ({...prev, clientPhone: e.target.value}))} />
                                            </div>
                                        </div>
                                        <div className="mt-auto">
                                            <Button onClick={() => onConfirm(form)} disabled={isSaving || !isStepValid()} className="w-full py-4 text-base" icon={isSaving ? null : 'check'}>{isSaving ? "Confirmando..." : "Confirmar Agendamento"}</Button>
                                            <button onClick={() => setStep(3)} className="w-full mt-4 text-xs font-bold text-zinc-500 hover:text-white uppercase tracking-widest transition-colors">Voltar e corrigir</button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const AdminPanel = ({ appointments = [], services = [], staff = [], onUpdateStatus, onAddService, onDeleteService, onAddStaff, onDeleteStaff }) => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [newService, setNewService] = useState({ name: '', price: '', duration: '', desc_text: '' });
            const [newStaff, setNewStaff] = useState({ name: '', role: '', image: '', desc_text: '' });
            const [statusFilter, setStatusFilter] = useState('all');

            const revenue = appointments.filter(a => a.status === 'completed' || a.status === 'confirmed').reduce((acc, curr) => acc + (curr.service?.price || 0), 0);
            const uniqueClients = Array.from(new Set(appointments.map(a => a.client_phone))).map(phone => appointments.find(a => a.client_phone === phone));

            const handleAddService = (e) => {
                e.preventDefault();
                onAddService({ ...newService, price: parseFloat(newService.price), duration: parseInt(newService.duration) });
                setNewService({ name: '', price: '', duration: '', desc_text: '' });
            };

            const handleAddStaff = (e) => {
                e.preventDefault();
                onAddStaff(newStaff);
                setNewStaff({ name: '', role: '', image: '', desc_text: '' });
            };

            const groupedAppointments = useMemo(() => {
                const groups = {};
                const filtered = appointments.filter(a => statusFilter === 'all' ? true : a.status === statusFilter);
                filtered.forEach(apt => {
                    const date = apt.date;
                    if (!groups[date]) groups[date] = [];
                    groups[date].push(apt);
                });
                return groups;
            }, [appointments, statusFilter]);

            return (
                <div className="min-h-screen bg-black flex text-zinc-200 font-sans">
                    <aside className="w-72 border-r border-zinc-800 bg-zinc-950 p-8 flex flex-col hidden lg:flex fixed h-full top-0 left-0 overflow-y-auto">
                        <div className="flex items-center gap-3 mb-12 text-white px-2"><Icon path={icons.scissors} size={28} className="text-amber-500"/><span className="font-bold tracking-widest text-xl font-serif">ADMIN</span></div>
                        <nav className="flex-1 space-y-2">
                            {['dashboard', 'agenda', 'servicos', 'equipe', 'clientes'].map(tab => (
                                <button key={tab} onClick={() => setActiveTab(tab)} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all duration-300 ${activeTab === tab ? 'bg-gradient-to-r from-amber-500/20 to-transparent text-amber-500 border-l-2 border-amber-500' : 'text-zinc-400 hover:text-white hover:bg-zinc-900'}`}>
                                    <Icon path={icons[tab === 'equipe' ? 'briefcase' : tab === 'servicos' ? 'settings' : tab === 'clientes' ? 'users' : tab === 'agenda' ? 'calendar' : 'dashboard']} size={18}/> 
                                    {tab.charAt(0).toUpperCase() + tab.slice(1)}
                                </button>
                            ))}
                        </nav>
                    </aside>
                    <main className="flex-1 p-8 lg:p-12 lg:ml-72 overflow-y-auto min-h-screen">
                        <header className="flex justify-between items-center mb-12">
                            <div><h2 className="text-3xl font-bold text-white mb-2 font-serif">Painel de Controle</h2><p className="text-zinc-500 text-sm">Gestão completa do seu negócio</p></div>
                            <div className="flex items-center gap-4">
                                <div className="text-right mr-2"><p className="text-white text-sm font-bold">Admin</p><p className="text-zinc-500 text-xs">Ilha Cuts</p></div>
                                <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-amber-500 to-amber-700 border-2 border-zinc-800 shadow-lg"></div>
                            </div>
                        </header>
                        
                        {activeTab === 'dashboard' && (
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 animate-fade-in">
                                <GlassCard className="!p-6" hoverEffect={false}><div className="flex justify-between items-start mb-6"><div className="p-3 rounded-xl bg-zinc-800 text-green-500 bg-opacity-50"><Icon path={icons.dollar} size={24}/></div></div><h3 className="text-4xl font-bold text-white mb-1 font-serif">{fmtMoney(revenue)}</h3><p className="text-zinc-500 text-sm font-medium uppercase tracking-wide">Receita Estimada</p></GlassCard>
                                <GlassCard className="!p-6" hoverEffect={false}><div className="flex justify-between items-start mb-6"><div className="p-3 rounded-xl bg-zinc-800 text-blue-500 bg-opacity-50"><Icon path={icons.users} size={24}/></div></div><h3 className="text-4xl font-bold text-white mb-1 font-serif">{appointments.length}</h3><p className="text-zinc-500 text-sm font-medium uppercase tracking-wide">Total Agendamentos</p></GlassCard>
                                <GlassCard className="!p-6" hoverEffect={false}><div className="flex justify-between items-start mb-6"><div className="p-3 rounded-xl bg-zinc-800 text-amber-500 bg-opacity-50"><Icon path={icons.star} size={24}/></div></div><h3 className="text-4xl font-bold text-white mb-1 font-serif">{uniqueClients.length}</h3><p className="text-zinc-500 text-sm font-medium uppercase tracking-wide">Clientes Únicos</p></GlassCard>
                            </div>
                        )}

                        {activeTab === 'agenda' && (
                            <div className="space-y-8 animate-fade-in">
                                <div className="flex gap-2 p-1 bg-zinc-900/50 rounded-xl w-fit border border-zinc-800">
                                    {['all', 'confirmed', 'completed', 'cancelled'].map(status => (
                                        <button key={status} onClick={() => setStatusFilter(status)} className={`px-5 py-2 rounded-lg text-xs font-bold uppercase tracking-wide transition-all ${statusFilter === status ? 'bg-amber-500 text-black shadow-lg shadow-amber-500/20' : 'text-zinc-400 hover:text-white hover:bg-zinc-800'}`}>
                                            {status === 'all' ? 'Todos' : status === 'confirmed' ? 'Confirmados' : status === 'completed' ? 'Concluídos' : 'Cancelados'}
                                        </button>
                                    ))}
                                </div>
                                {Object.keys(groupedAppointments).length === 0 ? 
                                    <div className="flex flex-col items-center justify-center h-64 text-zinc-500 bg-zinc-900/30 rounded-2xl border border-zinc-800 border-dashed">
                                        <Icon path={icons.calendar} size={48} className="mb-4 opacity-20"/>
                                        <p>Nenhum agendamento encontrado.</p>
                                    </div> : 
                                    Object.keys(groupedAppointments).sort().reverse().map(date => (
                                        <div key={date} className="space-y-4">
                                            <h3 className="text-zinc-400 font-bold text-xs uppercase tracking-[0.2em] pl-2 flex items-center gap-4">
                                                {new Date(date).toLocaleDateString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long' })}
                                                <span className="h-px bg-zinc-800 flex-1"></span>
                                            </h3>
                                            <div className="grid gap-3">
                                                {groupedAppointments[date].map(apt => (
                                                    <div key={apt.id} className="bg-zinc-900 border border-zinc-800 p-5 rounded-xl flex items-center justify-between hover:border-amber-500/30 transition-all hover:bg-zinc-800/50 group">
                                                        <div className="flex items-center gap-6">
                                                            <div className="text-xl font-bold text-white w-16 text-center bg-zinc-950 p-2 rounded-lg border border-zinc-800 font-mono">{apt.time}</div>
                                                            <div>
                                                                <p className="text-white font-bold text-lg">{apt.client_name}</p>
                                                                <p className="text-zinc-500 text-xs flex items-center gap-2 mt-1">
                                                                    <span className="text-amber-500 font-bold">{apt.service?.name}</span> 
                                                                    <span className="w-1 h-1 bg-zinc-700 rounded-full"></span> 
                                                                    <span>{apt.barber?.name}</span>
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div className="flex items-center gap-4">
                                                            {apt.status === 'confirmed' && (
                                                                <div className="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                                                    <button onClick={() => onUpdateStatus(apt.id, 'completed')} className="p-2 bg-green-500/10 text-green-500 rounded-lg hover:bg-green-500/20 transition-colors border border-green-500/20" title="Concluir"><Icon path={icons.check} size={18}/></button>
                                                                    <button onClick={() => onUpdateStatus(apt.id, 'cancelled')} className="p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20 transition-colors border border-red-500/20" title="Cancelar"><Icon path={icons.x} size={18}/></button>
                                                                </div>
                                                            )}
                                                            <span className={`text-[10px] font-bold px-3 py-1 rounded-full uppercase tracking-wider ${apt.status === 'confirmed' ? 'bg-amber-500/10 text-amber-500 border border-amber-500/20' : apt.status === 'completed' ? 'bg-green-500/10 text-green-500 border border-green-500/20' : 'bg-red-500/10 text-red-500 border border-red-500/20'}`}>{apt.status === 'confirmed' ? 'Confirmado' : apt.status === 'completed' ? 'Concluído' : 'Cancelado'}</span>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    ))
                                }
                            </div>
                        )}

                        {activeTab === 'servicos' && (
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade-in">
                                <div className="lg:col-span-2 space-y-4">
                                    {services.map(s => (
                                        <div key={s.id} className="bg-zinc-900 border border-zinc-800 p-5 rounded-xl flex justify-between items-center group hover:border-zinc-700 transition-colors">
                                            <div>
                                                <h4 className="font-bold text-white text-lg">{s.name}</h4>
                                                <p className="text-zinc-500 text-sm mt-1">{s.desc_text}</p>
                                                <div className="flex items-center gap-3 mt-3">
                                                    <span className="text-amber-500 font-bold font-serif">{fmtMoney(s.price)}</span>
                                                    <span className="text-zinc-600 text-xs">•</span>
                                                    <span className="text-zinc-400 text-xs font-bold uppercase tracking-wide">{s.duration} min</span>
                                                </div>
                                            </div>
                                            <button onClick={() => onDeleteService(s.id)} className="p-3 text-zinc-600 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all opacity-0 group-hover:opacity-100"><Icon path={icons.trash} size={18}/></button>
                                        </div>
                                    ))}
                                    {services.length === 0 && <div className="text-zinc-500 text-center p-8 bg-zinc-900/30 rounded-xl border border-zinc-800 border-dashed">Nenhum serviço cadastrado.</div>}
                                </div>
                                <div className="bg-zinc-900 border border-zinc-800 p-8 rounded-2xl h-fit sticky top-8">
                                    <h4 className="font-bold text-white mb-6 flex items-center gap-2"><Icon path={icons.plus} size={20} className="text-amber-500"/> Novo Serviço</h4>
                                    <form onSubmit={handleAddService} className="space-y-4">
                                        <div><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Nome</label><input className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="Ex: Corte Degrade" value={newService.name} onChange={e => setNewService({...newService, name: e.target.value})} required/></div>
                                        <div className="flex gap-4">
                                            <div className="flex-1"><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Preço (R$)</label><input type="number" className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="0.00" value={newService.price} onChange={e => setNewService({...newService, price: e.target.value})} required/></div>
                                            <div className="flex-1"><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Duração (min)</label><input type="number" className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="0" value={newService.duration} onChange={e => setNewService({...newService, duration: e.target.value})} required/></div>
                                        </div>
                                        <div><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Descrição</label><input className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="Detalhes do serviço" value={newService.desc_text} onChange={e => setNewService({...newService, desc_text: e.target.value})} /></div>
                                        <button type="submit" className="w-full bg-amber-500 hover:bg-amber-600 text-black font-bold py-3 rounded-lg transition-all hover:shadow-lg hover:shadow-amber-500/20 mt-4">Adicionar Serviço</button>
                                    </form>
                                </div>
                            </div>
                        )}

                        {activeTab === 'equipe' && (
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 animate-fade-in">
                                <div className="lg:col-span-2 space-y-4">
                                    {staff.map(s => (
                                        <div key={s.id} className="bg-zinc-900 border border-zinc-800 p-5 rounded-xl flex items-center gap-5 hover:border-zinc-700 transition-colors group">
                                            <div className="w-14 h-14 rounded-full bg-zinc-800 border-2 border-zinc-700 flex items-center justify-center font-bold text-zinc-400 text-lg shadow-inner">{s.image}</div>
                                            <div className="flex-1">
                                                <h4 className="font-bold text-white text-lg">{s.name}</h4>
                                                <p className="text-amber-500 text-xs font-bold uppercase tracking-wide mb-1">{s.role}</p>
                                                <p className="text-zinc-500 text-sm truncate max-w-md">{s.desc_text}</p>
                                            </div>
                                            <button onClick={() => onDeleteStaff(s.id)} className="p-3 text-zinc-600 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-all opacity-0 group-hover:opacity-100"><Icon path={icons.trash} size={18}/></button>
                                        </div>
                                    ))}
                                    {staff.length === 0 && <div className="text-zinc-500 text-center p-8 bg-zinc-900/30 rounded-xl border border-zinc-800 border-dashed">Nenhum membro na equipe.</div>}
                                </div>
                                <div className="bg-zinc-900 border border-zinc-800 p-8 rounded-2xl h-fit sticky top-8">
                                    <h4 className="font-bold text-white mb-6 flex items-center gap-2"><Icon path={icons.plus} size={20} className="text-amber-500"/> Novo Membro</h4>
                                    <form onSubmit={handleAddStaff} className="space-y-4">
                                        <div><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Nome</label><input className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="Nome Completo" value={newStaff.name} onChange={e => setNewStaff({...newStaff, name: e.target.value})} required/></div>
                                        <div><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Cargo</label><input className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="Ex: Master Barber" value={newStaff.role} onChange={e => setNewStaff({...newStaff, role: e.target.value})} required/></div>
                                        <div><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Iniciais</label><input className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="Ex: JN" value={newStaff.image} onChange={e => setNewStaff({...newStaff, image: e.target.value})} required/></div>
                                        <div><label className="text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2 block">Bio Curta</label><input className="w-full bg-black border border-zinc-700 rounded-lg p-3 text-white text-sm focus:border-amber-500 outline-none transition-colors" placeholder="Descrição rápida" value={newStaff.desc_text} onChange={e => setNewStaff({...newStaff, desc_text: e.target.value})} /></div>
                                        <button type="submit" className="w-full bg-amber-500 hover:bg-amber-600 text-black font-bold py-3 rounded-lg transition-all hover:shadow-lg hover:shadow-amber-500/20 mt-4">Adicionar Membro</button>
                                    </form>
                                </div>
                            </div>
                        )}

                        {activeTab === 'clientes' && (
                            <GlassCard className="!p-0 overflow-hidden" hoverEffect={false}>
                                <div className="p-6 border-b border-zinc-800"><h3 className="font-bold text-white text-lg">Carteira de Clientes</h3></div>
                                <div className="divide-y divide-zinc-800 max-h-[600px] overflow-y-auto">
                                    {uniqueClients.map((c, i) => (
                                        <div key={i} className="p-5 flex items-center justify-between hover:bg-zinc-800/30 transition-colors">
                                            <div className="flex items-center gap-5">
                                                <div className="w-12 h-12 rounded-full bg-zinc-900 border border-zinc-800 flex items-center justify-center text-zinc-500"><Icon path={icons.user} size={20}/></div>
                                                <div><p className="text-white font-bold text-lg">{c.client_name}</p><p className="text-zinc-500 text-sm font-mono">{c.client_phone}</p></div>
                                            </div>
                                            <button className="text-amber-500 hover:text-amber-400 text-xs font-bold uppercase tracking-widest border border-amber-500/20 px-4 py-2 rounded-lg hover:bg-amber-500/10 transition-all">Ver Histórico</button>
                                        </div>
                                    ))}
                                    {uniqueClients.length === 0 && <div className="p-12 text-center text-zinc-500">Nenhum cliente registrado.</div>}
                                </div>
                            </GlassCard>
                        )}
                    </main>
                </div>
            );
        };

        function App() {
            const [view, setView] = useState('home');
            const [scrolled, setScrolled] = useState(false);
            const [bookingOpen, setBookingOpen] = useState(false);
            const [loading, setLoading] = useState(false);
            const [toast, setToast] = useState(null);
            
            const [appointments, setAppointments] = useState([]);
            const [services, setServices] = useState(SERVICES_DEFAULT);
            const [staff, setStaff] = useState(STAFF_DEFAULT);

            useEffect(() => {
                const onScroll = () => setScrolled(window.scrollY > 20);
                window.addEventListener('scroll', onScroll);
                return () => window.removeEventListener('scroll', onScroll);
            }, []);

            const fetchData = async () => {
                if (!sbClient) return;
                
                const { data: apts } = await sbClient.from('appointments').select('*').order('created_at', { ascending: false });
                if (apts) setAppointments(apts);
                
                const { data: servs } = await sbClient.from('services').select('*').order('price', { ascending: true });
                if (servs && servs.length > 0) setServices(servs);

                const { data: stf } = await sbClient.from('staff').select('*');
                if (stf && stf.length > 0) setStaff(stf);
            };

            useEffect(() => {
                fetchData();
                const interval = setInterval(fetchData, 5000); 
                return () => clearInterval(interval);
            }, []);

            const showToast = (title, msg) => {
                setToast({ title, msg });
                setTimeout(() => setToast(null), 4000);
            };

            const handleBooking = async (data) => {
                if (!sbClient) { showToast("Erro Config", "Supabase não conectado."); return; }
                setLoading(true);
                
                let guestId = localStorage.getItem('guest_id');
                if (!guestId) {
                    guestId = 'guest-' + Math.random().toString(36).substr(2, 9);
                    localStorage.setItem('guest_id', guestId);
                }

                const payload = {
                    client_name: data.clientName,
                    client_phone: data.clientPhone,
                    date: data.date,
                    time: data.time,
                    service: data.service,
                    barber: data.barber,
                    status: 'confirmed',
                    user_id: guestId
                };
                
                const { error } = await sbClient.from('appointments').insert([payload]);
                setLoading(false);
                
                if (error) {
                    console.error(error);
                    showToast("Erro", "Falha ao salvar.");
                } else {
                    setBookingOpen(false);
                    showToast("Sucesso!", "Horário agendado com sucesso.");
                    fetchData();
                }
            };

            const handleUpdateStatus = async (id, status) => {
                const { error } = await sbClient.from('appointments').update({ status }).eq('id', id);
                if (!error) {
                    showToast("Atualizado", `Status alterado.`);
                    fetchData();
                } else {
                    showToast("Erro", "Não foi possível atualizar.");
                }
            };

            const handleAddService = async (serviceData) => {
                const { error } = await sbClient.from('services').insert([serviceData]);
                if (!error) {
                    showToast("Sucesso", "Serviço adicionado.");
                    fetchData();
                } else {
                    console.error(error);
                    showToast("Erro", "Falha ao adicionar serviço.");
                }
            };

            const handleDeleteService = async (id) => {
                if(!confirm("Tem certeza que deseja remover este serviço?")) return;
                const { error } = await sbClient.from('services').delete().eq('id', id);
                if (!error) {
                    showToast("Removido", "Serviço excluído.");
                    fetchData();
                }
            };

            const handleAddStaff = async (staffData) => {
                const { error } = await sbClient.from('staff').insert([staffData]);
                if (!error) {
                    showToast("Sucesso", "Membro adicionado à equipe.");
                    fetchData();
                }
                else { console.error(error); showToast("Erro", "Falha ao adicionar membro."); }
            };

            const handleDeleteStaff = async (id) => {
                if(!confirm("Tem certeza?")) return;
                const { error } = await sbClient.from('staff').delete().eq('id', id);
                if (!error) { showToast("Removido", "Membro removido da equipe."); fetchData(); }
            };

            const currentView = () => {
                if (view === 'admin') return (
                    <AdminPanel 
                        appointments={appointments} 
                        services={services} 
                        staff={staff}
                        onUpdateStatus={handleUpdateStatus} 
                        onAddService={handleAddService}
                        onDeleteService={handleDeleteService}
                        onAddStaff={handleAddStaff}
                        onDeleteStaff={handleDeleteStaff}
                    />
                );
                return (
                    <main>
                        <Navbar onViewChange={setView} currentView={view} scrolled={scrolled} onOpenBooking={() => setBookingOpen(true)} />
                        <Hero onCta={() => setBookingOpen(true)} />
                        <Features services={services} />
                        <Team staff={staff} />
                        <Gallery />
                        <Footer />
                        <BookingModal isOpen={bookingOpen} onClose={() => setBookingOpen(false)} onConfirm={handleBooking} isSaving={loading} services={services} staff={staff} />
                    </main>
                );
            };

            return (
                <div className="text-zinc-200">
                    {currentView()}
                    {toast && (
                        <div className="fixed bottom-6 right-6 z-[100] bg-zinc-900 border border-zinc-800 p-5 rounded-xl shadow-2xl flex items-center gap-4 animate-slide-up border-l-4 border-l-amber-500">
                            <div className="w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center text-green-500"><Icon path={icons.check} size={20}/></div>
                            <div><h4 className="font-bold text-white text-sm">{toast.title}</h4><p className="text-zinc-400 text-xs">{toast.msg}</p></div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
